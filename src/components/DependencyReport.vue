<template>
  <div class="report" id="dependencies-report">
    <h3>Libraries and Frameworks</h3>
    <table v-if="showReport">
      <thead>
        <tr>
          <th
            v-for="(heading, index) in dependencyReport.headings"
            :key="index"
          >
            {{ heading.text }}
          </th>
        </tr>
      </thead>
      <tbody>
        <template v-for="(dependency, index) in dependencyReport.dependencies">
          <tr :key="index">
            <td>{{ dependency.name }}</td>
            <td>{{ dependency.version }}</td>
          </tr>
        </template>
      </tbody>
    </table>
    <p v-else>No libraries or frameworks detected.</p>
  </div>
</template>

<script>
export default {
  name: "DependencyReport",
  props: {
    report: Object,
    showReport: Boolean,
  },
  computed: {
    dependencyReport: function () {
      let dependencies = [];
      this.report.items.forEach((item) => {
        console.log(item);
        dependencies.push({
          name: item.name,
          version: item.version ? item.version : "unknown version",
        });
      });

      return {
        headings: this.report.headings,
        dependencies,
      };
    },
  },
};
</script>

<style></style>
